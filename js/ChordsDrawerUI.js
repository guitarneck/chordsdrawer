var $DB=DOMHelper,UIIDS={title:"gridTitle",start:"gridStart",name:"usrSongName",strings:"usrGuitarStrings",frets:"usrDiagramFrets",file:"usrFileLoad"};function setupui(){var t=$DB.div("chordsform");return $DB.append(t,song_ui_create(),edition_ui_create()),edition_ui_actions_append($DB.byId("editorgrid")),t}function ui_display_song_name(t){$DB.byId(UIIDS.name).value=t,document.title=t}function ui_display_song_frets(t){$DB.byId(UIIDS.frets).value=t}function ui_display_song_strings(t){$DB.byId(UIIDS.strings).value=t}function ui_display_chord_name(t){$DB.byId(UIIDS.title).value=t}function ui_display_chord_start(t){$DB.byId(UIIDS.start).value=t}function song_ui_setSongName(t){ChordsDrawer.updateSongName(t)}function song_ui_setGuitarStrings(t){console.log("change strings length to all song")}function song_ui_setGuitarFrets(t){var i=t.defaultValue;ChordsDrawer.updateFrets(t.value)?t.defaultValue=t.value:t.value=i}function song_ui_createSong(){window.location.reload()}function song_ui_loadSong(t){ChordsDrawer.loadFile(t)}function song_ui_saveSong(){ChordsDrawer.saveFile()}function song_ui_lilyPond(){ChordsDrawer.exportLilyPond()}function song_ui_printSong(){ChordsDrawer.print()}function song_ui_create(){var t=$DB.fieldset("Song"),i=$DB.attachAttributesList($DB.fileload("fileLoader",function(){song_ui_loadSong(this.files[0])}),{style:"display:none",accept:ChordsDrawer.extension+",text/plain"});return $DB.append(t,$DB.label($DB.italic("Name : "),UIIDS.name),$DB.attachAttributesList($DB.textfield("songName-textField",function(){song_ui_setSongName(this.value)},UIIDS.name),{class:"input-normal-text",style:"font-size:90%"}),$DB.nbsp(),$DB.label($DB.italic("Guitar strings : "),UIIDS.strings),$DB.attachAttributesList($DB.number(UIIDS.strings,1,8,6,function(){song_ui_setGuitarStrings(this.value)}),{style:"width:40px"}),$DB.nbsp(),$DB.label($DB.italic("Diagram frets : "),UIIDS.frets),$DB.attachAttributesList($DB.number(UIIDS.frets,1,10,5,function(){song_ui_setGuitarFrets(this)}),{style:"width:40px"}),$DB.br(),$DB.class($DB.before($DB.button2("New",function(){song_ui_createSong()}).firstChild,$DB.class($DB.italic(""),"far fa-file"),$DB.nbsp()),"input-normal-text"),$DB.nbsp(),i,$DB.class($DB.before($DB.button2("Load",function(){$DB.byId(i.id).click()}).firstChild,$DB.class($DB.italic(""),"far fa-folder-open"),$DB.nbsp()),"input-normal-text"),$DB.nbsp(),$DB.class($DB.before($DB.button2("Save as...",function(){song_ui_saveSong()}).firstChild,$DB.class($DB.italic(""),"far fa-save"),$DB.nbsp()),"input-normal-text"),$DB.nbsp(),$DB.class($DB.before($DB.button2("Print",function(){song_ui_printSong()}).firstChild,$DB.class($DB.italic(""),"fas fa-print"),$DB.nbsp()),"input-normal-text")),t}function edition_ui_buttons_insert(t,i,n,e){return t.substr(0,i)+e+t.substr(n,t.length)}function edition_ui_buttons_specialChar(t){var i=$DB.byId(UIIDS.title);if(i.value.length!==i.maxLength){var n=selEnd=i.value.length;if(void 0!==i.selectionStart){if(n=i.selectionStart,selEnd=i.selectionEnd,n>selEnd){var e=selpos;n=selEnd,selEnd=e}n-selEnd}i.value=edition_ui_buttons_insert(i.value,n,selEnd,t),i.onchange(),i.focus()}}var edition_ui_buttons_HChordsMap={0:{A:61505,Bb:61513,B:61506,C:61507,D:61508,E:61509,F:61510,G:61511,H:61512,separator:null,bemol:61538,becarre:61473,diese:61475},2:{m:61549,"m7/b5":61498,min:61550,"-":61485,"-7/b5":61486,"+":61483,"semi dim":61477,o:61488,"dim.":61496,add:61537,aug:61535},3:{"sus 2":61474,"sus 4":61476,"sus 2 4":61557},4:{"up 2":61490,"up 4":61492,"up b5":61520,"up 5":61493,"up #5":61519,"up +5":61556,"up 6":61494,"up 7":61495,"up b9":61544,"up 9":61497,"up #9":61515,"up 11":61489,"up #11":61516,"up b13":61518,"up 13":61491,separator:null,"up maj":61554,"separator-":null,"up maj7":61517,"up triangle":61534,"separator--":null,"/":61487,"separator---":null,"bemol up":61500,"becarre up":61501,"diese up":61502,"separator----":null,"up (":61531,"up )":61533},5:{"up b5 b9":61543,"up b5 9":61539,"up b5 #9":61521,separator:null,"up b5 b13":61479,"up b5 13":61478,"separator-":null,"up #5 b9":61484,"up #5 #13":61482,"separator--":null,"up 6 9":61542,"separator---":null,"up 9 13":61540},8:{"up 5 (no 3)":61551,"up b5 (no 3)":61552,"up #5 (no 3)":61553},9:{"on A":61522,"on B":61523,"on Bb":61524,"on C":61525,"on D":61526,"on E":61527,"on F":61528,"on G":61529,"on H":61530,"separator-":null,"bemol bas":61546,"becarre bas":61547,"diese bas":61548}};function edition_ui_buttons_append(t){var i;for(var n in edition_ui_buttons_HChordsMap){for(var e in i=$DB.class($DB.span(),"btgroup"),$DB.append(t,i),edition_ui_buttons_HChordsMap[n])null===edition_ui_buttons_HChordsMap[n][e]?(i=$DB.class($DB.span(),"btgroup"),$DB.append(t,i)):$DB.append(i,$DB.class($DB.button(String.fromCharCode(edition_ui_buttons_HChordsMap[n][e]),function(){edition_ui_buttons_specialChar(this.value)}),"chords-font"));t.appendChild($DB.attachAttributesList($DB.hr(),{style:"border:0;border-top:1px solid grey"}))}t.removeChild(t.lastChild)}function edition_ui_actions_add_chord(){ChordsDrawer.newChord()}function edition_ui_actions_dup_chord(){ChordsDrawer.dupChord()}function edition_ui_actions_del_chord(){ChordsDrawer.delChord()}function edition_ui_actions_raz_chord(){ChordsDrawer.razChord()}function edition_ui_actions_append(t){$DB.append(t,$DB.append($DB.element("DIV"),$DB.before($DB.button2("",function(){edition_ui_actions_add_chord()}).firstChild,$DB.class($DB.italic(""),"far fa-plus-square"),$DB.nbsp()),$DB.nbsp(),$DB.before($DB.button2("",function(){edition_ui_actions_del_chord()}).firstChild,$DB.class($DB.italic(""),"far fa-trash-alt"),$DB.nbsp()),$DB.nbsp(),$DB.before($DB.button2("",function(){edition_ui_actions_dup_chord()}).firstChild,$DB.class($DB.italic(""),"far fa-copy"),$DB.nbsp()),$DB.nbsp(),$DB.before($DB.button2("",function(){edition_ui_actions_raz_chord()}).firstChild,$DB.class($DB.italic(""),"far fa-times-circle"),$DB.nbsp())))}function edition_ui_setGridTitle(t){ChordsDrawer.updateEditorTitle(t)}function edition_ui_setGridStart(t){ChordsDrawer.updateEditorFrets(parseInt(t))}function edition_ui_clearTitle(){var t=$DB.byId(UIIDS.title);t.value="",t.onchange()}function edition_ui_create(){var t=$DB.fieldset("Edition");return $DB.append(t,$DB.label($DB.italic("Title : "),UIIDS.title),$DB.attachAttributesList($DB.textfield("title-textField",function(){edition_ui_setGridTitle(this.value)},UIIDS.title),{class:"chords-font",style:"font-size:90%",maxlength:"14"}),$DB.nbsp(),$DB.reset("Clear",function(){edition_ui_clearTitle()}),$DB.nbsp(),$DB.label($DB.italic("Start : "),UIIDS.start),$DB.attachAttributesList($DB.number(UIIDS.start,1,20,1,function(){edition_ui_setGridStart(this.value)}),{style:"width:40px"}),$DB.attachAttributesList($DB.hr(),{style:"border:0;border-top:1px solid grey"})),edition_ui_buttons_append(t),t}